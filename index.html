<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ò‡∏£‡∏£‡∏°‡∏¢‡∏≤‡∏ï‡∏£‡∏≤</title>

  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: linear-gradient(135deg, #00c6ff, #0072ff);
      margin: 0;
      padding: 0;
    }

    .container {
      max-width: 420px;
      margin: 30px auto;
      background: #fff;
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,.15);
    }

    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
    }

    .tabs button {
      flex: 1;
      padding: 10px;
      border-radius: 10px;
      border: none;
      cursor: pointer;
      font-size: 16px;
    }

    .tabs button.active {
      background: #e8f0ff;
      color: #0072ff;
      font-weight: bold;
    }

    h2 {
      text-align: center;
      margin-top: 10px;
      margin-bottom: 20px;
      color: #ff5722;
    }

    input, select, button.submit {
      width: 100%;
      padding: 12px;
      margin-bottom: 12px;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 15px;
    }

    button.submit {
      background: #00c853;
      color: white;
      border: none;
      cursor: pointer;
    }

    .result-card {
      background: #f7faff;
      border-left: 5px solid #0072ff;
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 8px;
    }
  </style>
</head>

<body>
  <div class="container">

    <!-- TAB BUTTONS -->
    <div class="tabs">
      <button id="btnForm" class="active" onclick="showForm()">üìù ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
      <button id="btnSearch" onclick="showSearch()">üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
    </div>

    <!-- ================= FORM SECTION ================= -->
    <div id="formSection">
      <h2>‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ò‡∏£‡∏£‡∏°‡∏¢‡∏≤‡∏ï‡∏£‡∏≤</h2>

      <input type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•" />
      <input type="tel" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå" />

      <select>
        <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</option>
        <option>‡∏ò‡∏£‡∏£‡∏°‡∏¢‡∏≤‡∏ï‡∏£‡∏≤‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢</option>
        <option>‡∏ò‡∏£‡∏£‡∏°‡∏¢‡∏≤‡∏ï‡∏£‡∏≤‡∏ô‡∏Ñ‡∏£‡∏û‡∏ô‡∏°</option>
      </select>

      <select>
        <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</option>
        <option>‡∏£‡∏ñ‡∏õ‡∏£‡∏±‡∏ö‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</option>
        <option>‡∏£‡∏ñ‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤</option>
      </select>

      <input type="time" />

      <button class="submit">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
    </div>

    <!-- ================= SEARCH SECTION ================= -->
    <div id="searchSection" style="display:none">
      <h2>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h2>

      <input id="searchPhone" type="tel" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå" />
      <button class="submit" onclick="searchData()">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>

      <div id="searchResults"></div>
    </div>

  </div>

<script>
  /* ===== ‡∏™‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤ ===== */
  function showForm() {
    document.getElementById("formSection").style.display = "block";
    document.getElementById("searchSection").style.display = "none";

    document.getElementById("btnForm").classList.add("active");
    document.getElementById("btnSearch").classList.remove("active");
  }

  function showSearch() {
    document.getElementById("formSection").style.display = "none";
    document.getElementById("searchSection").style.display = "block";

    document.getElementById("btnForm").classList.remove("active");
    document.getElementById("btnSearch").classList.add("active");
  }

  /* ===== ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ===== */
  function searchData() {
    const phone = document.getElementById("searchPhone").value.trim();

    if (!phone) {
      alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå");
      return;
    }

    const url = "https://script.google.com/macros/s/AKfycbyygVxywjy4MKAcxTmr7Idu_LPtK_AECsomy4CL_mSzom5XBZdmE8P-xDttAfAhcyxp/exec"
      + "?mode=search&phone=" + encodeURIComponent(phone);

    fetch(url)
      .then(res => res.json())
      .then(data => {
        const box = document.getElementById("searchResults");
        box.innerHTML = "";

        if (!data.results || data.results.length === 0) {
          box.innerHTML = "<p>‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>";
          return;
        }

        data.results.forEach(r => {
          box.innerHTML += `
            <div class="result-card">
              <b>${r.inputName}</b><br>
              ‡πÄ‡∏ö‡∏≠‡∏£‡πå: ${r.phone}<br>
              ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°: ${r.activity}<br>
              ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£: ${r.item}<br>
              ‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏≠‡∏Å‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á: ${r.travelTime}
            </div>`;
        });
      })
      .catch(() => alert("‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à"));
  }

  window.onload = showForm;
</script>
</body>
</html>
